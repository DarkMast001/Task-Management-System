# Система управления задачами с использованием очередей

## Описание проекта

Проект представляет собой систему управления задачами, где задачи добавляются в очередь и выполняются рабочими процессами. Реализованы следующие функции:

- Добавление задач c приоритетами в очередь
- Извлечение задач из очереди рабочими процессами для выполнения
- Синхронизация доступа к очереди с использованием механизма потокобезопасности (ManualResetEventSlim)

## Архитектура проекта

### Модуль `Task-generator-system`.

**Класс `TaskGenerator`** используется для генерации задач на основе заданных параметров. Он предоставляет методы для создания списка задач, которые могут быть выполнены рабочими процессами.<br>

**Основные функции**:

- Генерация задач:
  - Создаёт список задач (`PriorityTask`) с случайными приоритетами и временем выполнения.
  - Учитывает вероятность прерывания задачи (задача может быть отменена с определённой вероятностью).
- Сериализация данных:
  - Поддерживает десериализацию данных из JSON-формата с помощью метода `TryCreate`. Это позволяет принимать данные от клиента через TCP-соединение.
- Параметры задач:
  - Количество задач.
  - Вероятность прерывания задачи (в процентах).
  - Минимальное и максимальное время выполнения задачи (в миллисекундах).

**Класс `PriorityTask`** представляет одну задачу с определённым приоритетом и временем выполнения.<br>

**Основные свойства**:

- `Priority`: Приоритет задачи (чем выше значение, тем выше приоритет).
- `Id`: Уникальные идентификатор задачи.
- `Socket`: Сокет клиента, который отправил задачу (используется для обратной связи).

**Основные методы:**

- `Execute`: Выполняет задачу. Если задача должна быть прервана, выбрасывается исключение `OperationCanceledException`.
- Логирование: Выводит информацию о начале, завершении или прерывании задачи в консоль.

**TCP клиент**

Модуль включает функционал для отправки данных о задачах на сервер через TCP-соединение.

---

### Модуль `Shaduler-and-processor-system`.

Модуль `Shaduler-and-processor-system` отвечает за управление задачами, их распределение между рабочими процессами и выполнение. Он включает два файла: основной класс Shaduler и программный файл Program, который реализует TCP-сервер для обработки входящих подключений и задач.

**Класс `Shaduler`** является центральным компонентом модуля и отвечает за управление очередью задач, запуск рабочих процессов и синхронизацию доступа к данным.

**Основные функции**:

- Очередь задач:
  - Задчи организованы в очередь по приоритетам (`SortedList<int, ConcurrentQueue<PriorityTask>>`).
  - Задачи с более высоким приоритетом выполняются раньше.
- Рабочие процессы:
  - Рабочие процессы создаются в количестве, указанном пользователем.
  - Каждый рабочий процесс извлекает задачи из очереди и выполняет их.
- Синхронизация доступа:
  - Используется механизм lock для обеспечения потокобезопасного доступа к очереди задач.
  - Для уведомления рабочих процессов о новых задачах используется ManualResetEventSlim.
- Обработка ошибок:
  - Поддерживается отмена задач с помощью исключения OperationCanceledException.
- Вывод информации:
  - Выводится информация о выполнении задач (время выполнения, количество задач).

**Основные поля и свойства**:

- `_queue`

### Модуль `TaskDescriptor`.

**Класс `TaskDescriptor`** используется для описания параметров задач, которые будут созданы. Этот класс сериализуется в JSON-формат для передачи данных по TCP.

**Основные свойства**:

- `AmountOfTasks`: Количество задач.
- `InterruptionChance`: Вероятность прерывания задачи (в процентах).
- `MinExecutionTimeInMilliseconds`: Минимальное время выполнения задачи (в миллисекундах).
- `MaxExecutionTimeInMilliseconds`: Максимальное время выполнения задачи (в миллисекундах).
